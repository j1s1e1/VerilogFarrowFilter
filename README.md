# VerilogFarrowFilter
Fractional interpolation using a Farrow structure

*** Some modules needed for this project for lower level functions are provided in VerilogCommon project.  Those files are not repeated here.

This project is a high level demonstration of interpolation using a Farrow structure.

farrow_tb.sv 

Use this top file to demonstrate filter operation.  If the x and y input and output are shown in analog set to hold values between clocks, the interpolation can clearly be seen.

The FIR filters and polynomial filter are working correctly.  Currently, the time offset from the input clock to the current point is just set by an incrementing step based on the output clock.  Although this works in the above example, this is not a robust method of calculating the offset from the input clock.  I have included another test bench to demonstrate this:

farrow_glitch_tb.sv

This file changes the time step from 1/4 to 3/7.  When the simulation is run, you will see that a step outside of the input waveform is generated about every 7 clock cycles.  Although this can be corrected by adjusting the offset between the input and output clocks in the test bench (change repeat value in     repeat(1) @(posedge clkOut);    in clkIn generator block) this is obviously not a robust way to generate the timing offset variable.  I expect a more robust solution would be based on both clock inputs.  The offset value (t in the farrow module) could be changed to an input to that module.  If both clocks are generated by the same structure in an implementation, there may be other signals provided that simplify the correct calculation.

The testbench directory includes several files that generate a matrix of sinc values and then creates a smaller matrix of polynomial fits to the sinc values.  Since these values use verilog DPI c functions to do the calculation, they are not synthesizable.  It is assumed that an implementaion would provide constants for this purpose.  The code was included to prvide an easy way to change the parameters during the design process.  
